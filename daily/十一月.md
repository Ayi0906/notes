[Toc]

## 解决跨域

- 用node写了一个app.js文件,又用http-server启动了客户端,网页中写了ajax提示跨域.

- 解决方法:在回调函数中添加

  - ```javascript
    res.header("Access-Control-Allow-Origin","*");
    ```

  - 设置允许跨域的域名，*代表允许任意域名跨域

[](https://blog.csdn.net/u012149969/article/details/81145144)

## xhr.open第三个参数

```javascript
xhr.open("get", 'http://127.0.0.1:3000/index', true)
```

第三个参数代表是否启用异步处理,true表示异步,fasle表示同步.同步会造成阻塞,异步会在同步代码结束后再下一个事件循环中处理.

```javascript
        let xhr = new XMLHttpRequest()
        xhr.onreadystatechange = function () {
            if (xhr.readyState === 4) {
                if ((xhr.status >= 200 && xhr.status < 300) || xhr.status === 304) {
                    console.log(xhr.responseText)
                }
            }
        }

        xhr.open("get", 'http://127.0.0.1:3000/index', true)
        xhr.send(null)

        for (let i = 0; i <= 100000; i++) {
            i === 100000 && console.log('同步完毕')
        }
```

先打印"同步完毕", 再打印ajax数据.



## childNodes

childNodes不可信任. 

```html
<div id="d1">
	<div id="d2"></div>
    <div id="d3"></div>
    <div id="d4"></div>
</div>
```

- clg(oD1.childNodes) // 7个,4个text与3个

```javascript
    <div id="d1"><div id="d2"></div><div id="d3"></div><div id="d4"></div></div>
    <script>
        let oD1 = document.querySelector('#d1')
        console.log(oD1.childNodes) // NodeList(3) [div#d2, div#d3, div#d4]
    </script>
```

